AddKeysToAgent yes

Include config.d/*

Host *
    # Connection keepalive
    ServerAliveInterval 30
    ServerAliveCountMax 3
    Compression yes

    # Security
    HashKnownHosts yes
    VisualHostKey yes
    VerifyHostKeyDNS yes
    UpdateHostKeys yes

    # Prefer modern key algorithms (ed25519 > ECDSA > RSA, no DSA/SHA-1)
    HostKeyAlgorithms ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,rsa-sha2-512,rsa-sha2-256
    PubkeyAcceptedAlgorithms ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,rsa-sha2-512,rsa-sha2-256

    # Only use keys explicitly configured for each host
    IdentitiesOnly yes

    # Connection multiplexing (reuse connections)
    ControlMaster auto
    ControlPath ~/.ssh/sockets/%C
    ControlPersist 600

